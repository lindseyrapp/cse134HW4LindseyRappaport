<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body style="text-align: center;">
    <nav>
        <a href="contact.html" class="active">Contact</a>
        <a href="index.html">Home</a>
        <a href="projects.html">Projects</a>
    </nav>
    <hr>
    <main>
        <h1>Contact</h1>
        <article>
            <h3>Get In Touch!</h3>
            <p>If you'd like to connect, feel free to find me on LinkedIn or fill out the contact form below:</p>

            <!-- LinkedIn link -->
            <address>
                <p>
                    <a href="https://www.linkedin.com/in/lindsey-rappaport/" target="_blank"><i>Connect with me on
                            <b>LinkedIn!</b></i></a>
                </p>
            </address>

            <!-- Contact form -->
            <form action="https://httpbin.org/post" method="post">
                <fieldset>
                    <legend><strong>Contact Form</strong></legend>
                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" required pattern="[A-Za-z\s]+"
                        title="Only letters and spaces allowed">
                    <p class="error-message" id="name-error"></p>

                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required minlength="2" maxlength="50">
                    <p class="error-message" id="email-error"></p>

                    <label for="subject">Subject:</label>
                    <select id="subject" name="subject">
                        <optgroup label="Topics">
                            <option value="general">General Inquiry</option>
                            <option value="job">Job Opportunity</option>
                            <option value="project">Project Collaboration</option>
                            <option value="feedback">Feedback</option>
                        </optgroup>
                    </select>

                    <label for="comments">Comments:</label>
                    <textarea id="comments" name="comments" rows="4" required minlength="2" maxlength="500"
                        title="Please enter at least 2 characters" placeholder="Write your message here..."></textarea>
                    <p class="error-message" id="comments-error"></p>
                    <p class="char-count" id="char-count">500 characters remaining</p>

                    <button type="submit">Send</button>
                </fieldset>
            </form>

            <p>After filling out the form, click the <kbd>Send</kbd> button to send your message.</p>

            <!-- Link to show terms and conditions -->
            <a href="#terms-dialog">Click here to read terms and conditions</a>

            <!-- Dialog for terms and conditions -->
            <dialog id="terms-dialog">
                <h3>Terms and Conditions</h3>
                <p>By contacting me, you agree to share your information solely for the purpose of communication. Your
                    data
                    will not be shared without consent.</p>
                <footer>
                    <button onclick="document.getElementById('terms-dialog').close();">Close</button>
                    <!-- Button to close the dialog -->
                </footer>
            </dialog>


            <hr>
            <!-- More info -->
            <details>
                <summary><strong>More Info</strong></summary>
                <p>Feel free to reach out at any time. I look forward to hearing from you!</p>
            </details>
        </article>
    </main>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Variables
            const form = document.getElementById("contact-form");
            const nameInput = document.getElementById("name");
            const emailInput = document.getElementById("email");
            const commentsInput = document.getElementById("comments");
            const charCount = document.getElementById("char-count");
            const nameError = document.getElementById("name-error");
            const emailError = document.getElementById("email-error");
            const commentsError = document.getElementById("comments-error");
            const maxCommentLength = 500;

            // Clear errors
            function clearErrors() {
                nameError.textContent = "";
                emailError.textContent = "";
                commentsError.textContent = "";
            }

            // Name validation and masking
            nameInput.addEventListener("input", function (event) {
                const regex = /^[A-Za-z\s]+$/;
                if (!regex.test(nameInput.value)) {
                    nameError.textContent = "Only letters and spaces allowed.";
                    nameInput.value = nameInput.value.replace(/[^A-Za-z\s]/g, "");
                } else {
                    nameError.textContent = "";
                }
            });

            // Comment validation
            commentsInput.addEventListener("input", function () {
                const remaining = maxCommentLength - commentsInput.value.length;
                charCount.textContent = `${remaining} characters remaining`;
                charCount.style.color = remaining < 50 ? "red" : "black";
                if (remaining < 0) {
                    commentsError.textContent = "Character limit exceeded.";
                    commentsInput.value = commentsInput.value.substring(0, maxCommentLength);
                } else {
                    commentsError.textContent = "";
                }
            });

            // Form validation (before submission)
            form.addEventListener("submit", function (event) {
                clearErrors();
                let hasErrors = false;
                if (!nameInput.checkValidity()) {
                    nameError.textContent = "Please enter a valid name.";
                    hasErrors = true;
                }
                if (!emailInput.checkValidity()) {
                    emailError.textContent = "Please enter a valid email address.";
                    hasErrors = true;
                }
                if (!commentsInput.checkValidity()) {
                    commentsError.textContent = "Please enter at least 2 characters.";
                    hasErrors = true;
                }
                if (hasErrors) {
                    event.preventDefault();
                }
            });
        });
    </script>
</body>

</html>